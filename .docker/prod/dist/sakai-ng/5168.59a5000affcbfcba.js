"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[5168],{5168:(D,u,r)=>{r.r(u),r.d(u,{ProjectModule:()=>A});var a=r(6814),m=r(707),v=r(8057),s=r(95),b=r(7853),d=r(3714),g=r(9552),h=r(3530),_=r(8642),f=r(4220),e=r(4769),C=r(5219);function j(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1," Projetos "),e.TgZ(2,"p-button",13),e.NdJ("onClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openFormDialog())}),e.qZA()()}}function x(o,p){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Id"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Nome"),e.qZA(),e._UZ(5,"th"),e.qZA())}function T(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openStepsDialog(l))}),e.qZA(),e.TgZ(7,"button",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.editRecord(l))}),e.qZA(),e.TgZ(8,"button",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.deleteRecord(l))}),e.qZA()()()}if(2&o){const t=p.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name)}}function S(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",21),e._uU(1),e.TgZ(2,"button",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.deleteStep(l.id))}),e.qZA()()}if(2&o){const t=p.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Z(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",17)(2,"input",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.stepName=i)}),e.qZA(),e.TgZ(3,"p-button",19),e.NdJ("onClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveStep())}),e.qZA()(),e.YNc(4,S,3,1,"div",20),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.stepName),e.xp6(1),e.Q6J("disabled",""==t.stepName),e.xp6(1),e.Q6J("ngForOf",t.recordSelected.steps)}}let w=(()=>{class o{get showFormDialog(){return this._showFormDialog}set showFormDialog(t){this._showFormDialog=t,t||(this.recordSelected=null)}get showStepsDialog(){return this._showStepsDialog}set showStepsDialog(t){this._showStepsDialog=t,t||(this.recordSelected=null,this.stepName="")}get records(){return this._projectService.projects}constructor(t){this._projectService=t,this._showFormDialog=!1,this._showStepsDialog=!1,this.recordSelected=null,this.stepName="",this.steps=[],this.formGroup=new s.cw({id:new s.NI(null,{validators:[]}),name:new s.NI(null,{validators:[s.kI.required]}),company_id:new s.NI(null)})}openStepsDialog(t){this.recordSelected=t,this.showStepsDialog=!0}openFormDialog(t=null){t?Object.entries(t).forEach(([n,i])=>{this.formGroup.get(n)?.setValue(i)}):Object.entries(this.formGroup.value).forEach(([n,i])=>{this.formGroup.get(n).setValue(null)}),this.formGroup.markAsPristine(),this.formGroup.markAsUntouched(),this.recordSelected=t,this.showFormDialog=!0}closeFormDialog(){this.showFormDialog=!1,this.formGroup.markAsPristine(),this.formGroup.markAsUntouched(),this.recordSelected=null}closeStepDialog(){this.showStepsDialog=!1,this.recordSelected=null}editRecord(t){this.openFormDialog(t)}deleteRecord(t){this._projectService.delete(t).subscribe()}save(){this.formGroup.markAsDirty(),this.formGroup.markAsUntouched(),this.formGroup.valid&&this._projectService.save(this.formGroup.value).subscribe({next:()=>{this.closeFormDialog()}})}saveStep(){this._projectService.saveStep(this.stepName,this.recordSelected.id).subscribe(),this.stepName=""}deleteStep(t){this._projectService.deleteStep(t,this.recordSelected.id).subscribe()}ngOnInit(){this._projectService.load().subscribe()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(f.Y))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-project"]],features:[e._Bn([f.Y])],decls:13,vars:11,consts:[[3,"value"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Projeto",3,"visible","formGroup","modal","draggable","resizable","visibleChange"],[2,"width","50vw"],["pInputText","","placeholder","Nome","formControlName","name",2,"width","100%"],[2,"display","flex","justify-content","flex-end","margin-top","0.5rem"],["severity","secondary","label","Cancelar",3,"onClick"],["severity","primary","label","Salvar",3,"onClick"],["header","Etapas",3,"visible","modal","draggable","resizable","visibleChange"],["style","width: 50vw;",4,"ngIf"],[1,"flex","align-items-center","justify-content-between"],["icon","pi pi-plus",3,"onClick"],["pButton","","pRipple","","label","Etapas",1,"p-button-rounded","p-button-primary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[2,"display","flex","padding-bottom","0.5rem","margin-bottom","0.5rem","border-bottom","solid 1px lightgray"],["pInputText","","placeholder","Nome",2,"flex","1",3,"ngModel","ngModelChange"],["severity","primary","icon","pi pi-plus",1,"ml-2",3,"disabled","onClick"],["style","display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem;",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","0.25rem"]],template:function(n,i){1&n&&(e.TgZ(0,"p-table",0),e.YNc(1,j,3,0,"ng-template",1),e.YNc(2,x,6,0,"ng-template",2),e.YNc(3,T,9,2,"ng-template",3),e.qZA(),e.TgZ(4,"p-dialog",4),e.NdJ("visibleChange",function(c){return i.showFormDialog=c}),e.TgZ(5,"div",5),e._UZ(6,"input",6),e.TgZ(7,"div",7)(8,"p-button",8),e.NdJ("onClick",function(){return i.closeFormDialog()}),e.qZA(),e._uU(9," \xa0\xa0\xa0 "),e.TgZ(10,"p-button",9),e.NdJ("onClick",function(){return i.save()}),e.qZA()()()(),e.TgZ(11,"p-dialog",10),e.NdJ("visibleChange",function(c){return i.showStepsDialog=c}),e.YNc(12,Z,5,3,"div",11),e.qZA()),2&n&&(e.Q6J("value",i.records),e.xp6(4),e.Q6J("visible",i.showFormDialog)("formGroup",i.formGroup)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(7),e.Q6J("visible",i.showStepsDialog)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.Q6J("ngIf",i.recordSelected))},dependencies:[a.sg,a.O5,m.Hq,m.zx,C.jx,d.o,s.Fj,s.JJ,s.JL,s.On,g.iA,h.V,s.sg,s.u],encapsulation:2})}return o})(),N=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:w}]),_.Bz]})}return o})(),A=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[a.ez,N,m.hJ,v.nD,d.j,s.u5,b.gz,g.U$,h.S,s.u5,s.UX,d.j]})}return o})()}}]);