"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[9467],{9467:(z,g,a)=>{a.r(g),a.d(g,{MissionModule:()=>$});var p=a(6814),d=a(707),C=a(8057),r=a(95),x=a(7853),f=a(3714),_=a(9552),h=a(3530),A=a(1865),b=a(3965),v=a(8642),M=a(3617),t=a(4769),y=a(8058),D=a(5219),T=a(5167),Z=a(6760);function F(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",16),t._uU(1," Miss\xf5es "),t.TgZ(2,"p-button",17),t.NdJ("onClick",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.openFormDialog())}),t.qZA()()}}function N(e,s){1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Id"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Objetivo de entrega"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Data de inicio"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Data de t\xe9rmino"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Recompensa (XP)"),t.qZA(),t._UZ(11,"th"),t.qZA())}function U(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"button",18),t.NdJ("click",function(){const l=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.deleteRecord(l))}),t.qZA()()()}if(2&e){const n=s.$implicit;t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.delivery_quantity),t.xp6(2),t.Oqu(t.lcZ(7,5,n.start_date)),t.xp6(3),t.Oqu(t.lcZ(10,7,n.end_date)),t.xp6(3),t.Oqu(n.reward)}}function q(e,s){1&e&&t.GkF(0)}function G(e,s){1&e&&t.GkF(0)}function J(e,s){1&e&&t.GkF(0)}function O(e,s){1&e&&t.GkF(0)}function k(e,s){1&e&&(t.TgZ(0,"div")(1,"small"),t._uU(2,"Campo obrigat\xf3rio"),t.qZA()())}function w(e,s){if(1&e&&(t.TgZ(0,"div")(1,"small"),t._uU(2),t.qZA()()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.hij("Valor m\xednimo ",n.errors.min.min,".")}}function I(e,s){if(1&e&&(t.TgZ(0,"div")(1,"small"),t._uU(2),t.qZA()()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.AsE("Valor m\xe1ximo atingido. ",n.errors.max.actual," de ",n.errors.max.max,"")}}function B(e,s){if(1&e&&(t.TgZ(0,"div")(1,"small"),t._uU(2),t.ALo(3,"date"),t.ALo(4,"date"),t.qZA()()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.AsE("",t.lcZ(3,2,n.errors.mustBeBiggerThanComparable.some)," deve ser maior que ",t.lcZ(4,4,n.errors.mustBeBiggerThanComparable.other),"")}}function V(e,s){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,k,3,0,"div",21),t.YNc(2,w,3,1,"div",21),t.YNc(3,I,3,2,"div",21),t.YNc(4,B,5,6,"div",21),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.errors.required),t.xp6(1),t.Q6J("ngIf",n.errors.min),t.xp6(1),t.Q6J("ngIf",n.errors.max),t.xp6(1),t.Q6J("ngIf",n.errors.mustBeBiggerThanComparable)}}function Y(e,s){if(1&e&&t.YNc(0,V,5,4,"div",19),2&e){const n=s.$implicit;t.Q6J("ngIf",n&&n.errors&&(n.dirty||n.touched))}}const c=function(){return{"width.%":100}},u=function(e){return{$implicit:e}};class j{static mustBeBiggerThanComparable(s,n){return o=>{if(!o.parent)return null;const i=o.parent,l=new Date(i.get(s).value),m=new Date(i.get(n).value);return l<m?{mustBeBiggerThanComparable:{some:l,other:m}}:null}}}class S{static updateValidators(s){return n=>(n.parent&&n.parent.get(s).updateValueAndValidity(),null)}}let E=(()=>{class e{get showFormDialog(){return this._showFormDialog}set showFormDialog(n){this._showFormDialog=n,n||(this.recordSelected=null)}get records(){return this._missionService.missions}constructor(n){this._missionService=n,this._showFormDialog=!1,this.recordSelected=null,this.formGroup=new r.cw({delivery_quantity:new r.NI(null,{validators:[r.kI.required,r.kI.min(1),r.kI.max(10)]}),start_date:new r.NI(null,{validators:[r.kI.required,S.updateValidators("end_date")]}),end_date:new r.NI(null,{validators:[r.kI.required,j.mustBeBiggerThanComparable("end_date","start_date")]}),reward:new r.NI(null,{validators:[r.kI.required,r.kI.min(10),r.kI.max(100)]})})}openFormDialog(n=null){n?Object.entries(n).forEach(([o,i])=>{this.formGroup.get(o)?.setValue(i)}):Object.entries(this.formGroup.value).forEach(([o,i])=>{this.formGroup.get(o).setValue(null)}),this.formGroup.markAsPristine(),this.formGroup.markAsUntouched(),this.recordSelected=n,this.showFormDialog=!0}closeFormDialog(){this.showFormDialog=!1,this.formGroup.markAsPristine(),this.formGroup.markAsUntouched(),this.recordSelected=null}deleteRecord(n){this._missionService.delete(n).subscribe()}save(){let n={};Object.entries(this.formGroup.value).forEach(([o,i])=>{this.formGroup.get(o).markAsDirty(),this.formGroup.get(o).markAsTouched(),n[o]=i}),this.formGroup.valid&&this._missionService.save(n).subscribe({next:()=>{this.closeFormDialog()}})}ngOnInit(){this._missionService.load().subscribe()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(y.F))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-mission"]],features:[t._Bn([M.J])],decls:24,vars:34,consts:[[3,"value"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Usu\xe1rio",3,"visible","formGroup","modal","draggable","resizable","visibleChange"],[2,"width","50vw"],[2,"margin-bottom","0.5rem"],["placeholder","Objetivo de entrega","formControlName","delivery_quantity",1,"w-100"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["appendTo","body","placeholder","Data inicial","formControlName","start_date","dateFormat","dd/mm/yy"],["appendTo","body","placeholder","Data final","formControlName","end_date","dateFormat","dd/mm/yy"],["placeholder","Recompensa (XP)","formControlName","reward",1,"w-100"],[2,"display","flex","justify-content","flex-end","margin-top","0.5rem"],["severity","secondary","label","Cancelar",3,"onClick"],["severity","primary","label","Salvar",3,"onClick"],["templatePrintError",""],[1,"flex","align-items-center","justify-content-between"],["icon","pi pi-plus",3,"onClick"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[4,"ngIf"]],template:function(o,i){if(1&o&&(t.TgZ(0,"p-table",0),t.YNc(1,F,3,0,"ng-template",1),t.YNc(2,N,12,0,"ng-template",2),t.YNc(3,U,15,9,"ng-template",3),t.qZA(),t.TgZ(4,"p-dialog",4),t.NdJ("visibleChange",function(m){return i.showFormDialog=m}),t.TgZ(5,"div",5)(6,"div",6),t._UZ(7,"p-inputNumber",7),t.YNc(8,q,1,0,"ng-container",8),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"p-calendar",9),t.YNc(11,G,1,0,"ng-container",8),t.qZA(),t.TgZ(12,"div",6),t._UZ(13,"p-calendar",10),t.YNc(14,J,1,0,"ng-container",8),t.qZA(),t.TgZ(15,"div",6),t._UZ(16,"p-inputNumber",11),t.YNc(17,O,1,0,"ng-container",8),t.qZA(),t.TgZ(18,"div",12)(19,"p-button",13),t.NdJ("onClick",function(){return i.closeFormDialog()}),t.qZA(),t._uU(20," \xa0\xa0\xa0 "),t.TgZ(21,"p-button",14),t.NdJ("onClick",function(){return i.save()}),t.qZA()()()(),t.YNc(22,Y,1,1,"ng-template",null,15,t.W1O)),2&o){const l=t.MAs(23);t.Q6J("value",i.records),t.xp6(4),t.Q6J("visible",i.showFormDialog)("formGroup",i.formGroup)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(3),t.Akn(t.DdM(22,c)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(23,u,i.formGroup.get("delivery_quantity"))),t.xp6(2),t.Akn(t.DdM(25,c)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(26,u,i.formGroup.get("start_date"))),t.xp6(2),t.Akn(t.DdM(28,c)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(29,u,i.formGroup.get("end_date"))),t.xp6(2),t.Akn(t.DdM(31,c)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(32,u,i.formGroup.get("reward")))}},dependencies:[p.O5,p.tP,d.Hq,d.zx,D.jx,r.JJ,r.JL,_.iA,h.V,r.sg,r.u,T.Rn,Z.f,p.uU],encapsulation:2})}return e})(),Q=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[v.Bz.forChild([{path:"",component:E}]),v.Bz]})}return e})(),$=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[p.ez,Q,d.hJ,C.nD,f.j,r.u5,x.gz,_.U$,h.S,r.u5,r.UX,f.j,A.cc,b.kW,T.L$,Z._8]})}return e})()}}]);